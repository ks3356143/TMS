# Table组件应用产品列表优化

## （1）气泡确认Popconfirm

点击元素，弹出气泡式确认框，一般可替代Modal对话框实现二次确认操作

功能有限，主要是轻量级别，用于二次确认

本篇主要用到一个`ok`按钮Events，即点击确认按钮时触发，对应还有个 `cancel`事件，默认是关闭确认对话框，如确认操作无特殊交互逻辑无需处理。



### 1.组件用法

```html
<template>
  <a-popconfirm content="你确定要删除此信息吗?">
    <a-button>是否删除</a-button>
  </a-popconfirm>
</template>
```



### 2.应用实战

```html
<a-table :columns="columns" :data="renderList" :pagination="false" >
<template #optional="{ record }">
  <a-button type="text" @click="editButtonClick(record)">编辑</a-button>
+  <a-popconfirm content="你确定要废弃此产品吗？" type="warning" @ok="deleteButtonClick(record.id)">
+   <a-button type="text">废弃</a-button>
+  </a-popconfirm>
  </template>
</a-table>
```



### 3.软删除和硬删除

```javascript
/* 接口product.ts新增软接口 */
export function apiProductRemove(id: number) {
  return axios.post(`/api/product/remove?id=${id}`);
}

/* 页面product/index.vue script部分新增确认事件处理 */
const removeButtonClick = async (id) => {
    const res = await apiProductRemove(id);
    if (res.code === 20000) {
        fetchData(); // 删除成功重新请求列表
    } else {
        console.log("产品删除失败");
    }
  }
```



### 4.优化table组件

在table组件的columns属性绑定中我们可以让设置省略和提示

```javascript
{
    title: "项目名称",
    dataIndex: "title",
    ellipsis: true, // 超长省略
    tooltip: true, 	// 鼠标放上去有提示
},
```

